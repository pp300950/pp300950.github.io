<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Music Quiz Game</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
      :root {
        --primary-color: #ff4757;
        --accent-glow: #ff6b81;
        --bg-color: #000000;
        --glass-bg: rgba(20, 20, 20, 0.65);
        --glass-border: rgba(255, 255, 255, 0.1);
        --text-color: #ffffff;
        --secondary-text: #a4b0be;
        --correct-color: #2ed573;
        --wrong-color: #ff4757;
      }

      body {
        font-family: 'Kanit', sans-serif;
        margin: 0;
        padding: 0;
        background-color: var(--bg-color);
        background-image: radial-gradient(
            circle at 10% 20%,
            rgba(255, 71, 87, 0.15) 0%,
            transparent 40%
          ),
          radial-gradient(
            circle at 90% 80%,
            rgba(46, 213, 115, 0.1) 0%,
            transparent 40%
          );
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        color: var(--text-color);
        overflow-x: hidden;
      }

      /* --- Sound Check Modal --- */
      #sound-check-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.95);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 999;
        backdrop-filter: blur(5px);
      }
      .modal-content {
        background: #1e1e1e;
        color: white;
        padding: 40px;
        border-radius: 20px;
        text-align: center;
        max-width: 90%;
        width: 400px;
        border: 1px solid #333;
        box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
        animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }

      .input-name {
        width: 80%;
        padding: 12px;
        border-radius: 8px;
        border: 1px solid #444;
        background: #2a2a2a;
        color: white;
        font-family: 'Kanit', sans-serif;
        font-size: 16px;
        margin-bottom: 20px;
        text-align: center;
      }
      .input-name:focus {
        outline: none;
        border-color: var(--primary-color);
      }

      /* --- Main Game Wrapper --- */
      .game-wrapper {
        width: 90%;
        max-width: 450px;
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: 1px solid var(--glass-border);
        border-radius: 30px;
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
        overflow: hidden;
        display: flex;
        flex-direction: column;
        position: relative;
        margin: 20px;
        transition: max-width 0.3s ease;
        /* ‡πÄ‡∏û‡∏¥‡πà‡∏° min-height ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏∏‡∏ö‡∏ï‡∏±‡∏ß */
        min-height: 500px;
      }

      /* Responsive Layout (PC/iPad) */
      @media (min-width: 768px) {
        .game-wrapper {
          max-width: 900px;
        }
        .game-content {
          display: flex;
          flex-direction: row;
          align-items: stretch;
        }
        .player-area {
          flex: 1;
          border-right: 1px solid var(--glass-border);
          padding: 40px !important;
        }
        .choices-area {
          flex: 1;
          background: transparent !important;
          padding: 40px !important;
          display: flex;
          flex-direction: column;
          justify-content: center;
        }
      }

      .header-score {
        padding: 20px 30px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: rgba(255, 255, 255, 0.03);
        border-bottom: 1px solid var(--glass-border);
        position: relative;
        z-index: 2;
      }
      .score-badge {
        background: rgba(255, 71, 87, 0.2);
        color: #ff6b81;
        padding: 5px 15px;
        border-radius: 20px;
        font-weight: 600;
        border: 1px solid rgba(255, 71, 87, 0.3);
      }

      /* --- Player UI --- */
      .player-area {
        padding: 30px 20px;
        text-align: center;
      }
      .vinyl-record {
        width: 160px;
        height: 160px;
        border-radius: 50%;
        background: radial-gradient(circle, #222 0%, #111 100%);
        margin: 0 auto 25px;
        position: relative;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
        border: 4px solid #333;
        display: flex;
        justify-content: center;
        align-items: center;
        animation: spin 6s linear infinite;
        animation-play-state: paused;
      }
      .vinyl-record::after {
        content: '';
        width: 60px;
        height: 60px;
        background: url('https://cdn-icons-png.flaticon.com/512/9308/9308728.png')
          no-repeat center/cover;
        border-radius: 50%;
        border: 2px solid #000;
      }
      .vinyl-record.playing {
        animation-play-state: running;
        box-shadow: 0 0 25px var(--accent-glow);
        border-color: var(--primary-color);
      }
      @keyframes spin {
        100% {
          transform: rotate(360deg);
        }
      }

      h3 {
        font-weight: 400;
        letter-spacing: 1px;
        margin-bottom: 5px;
      }

      .progress-container {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-top: 25px;
        font-size: 12px;
        color: var(--secondary-text);
      }
      input[type='range'] {
        flex-grow: 1;
        height: 4px;
        -webkit-appearance: none;
        background: #444;
        border-radius: 5px;
        cursor: pointer;
      }
      input[type='range']::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 14px;
        height: 14px;
        background: var(--primary-color);
        border-radius: 50%;
        cursor: pointer;
        box-shadow: 0 0 10px var(--primary-color);
      }

      .controls {
        margin-top: 30px;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .play-btn {
        width: 70px;
        height: 70px;
        border-radius: 50%;
        border: none;
        background: var(--primary-color);
        color: white;
        font-size: 28px;
        cursor: pointer;
        box-shadow: 0 0 20px rgba(255, 71, 87, 0.4);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.2s;
      }
      .play-btn:active {
        transform: scale(0.95);
      }

      .volume-container {
        margin-top: 20px;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 10px;
        font-size: 14px;
        color: var(--secondary-text);
      }
      .volume-slider {
        width: 80px;
      }

      /* --- Choices --- */
      .choices-area {
        padding: 25px;
        background: rgba(255, 255, 255, 0.02);
      }
      .choice-btn {
        width: 100%;
        padding: 18px 25px;
        margin-bottom: 15px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        color: #ddd;
        font-family: 'Kanit', sans-serif;
        font-size: 16px;
        cursor: pointer;
        text-align: left;
        transition: all 0.3s ease;
      }
      .choice-btn:hover:not(:disabled) {
        background: rgba(255, 255, 255, 0.1);
        border-color: var(--primary-color);
        color: white;
        box-shadow: 0 0 15px rgba(255, 71, 87, 0.3);
        transform: translateY(-2px);
      }
      .choice-btn.correct {
        background: rgba(46, 213, 115, 0.2);
        color: var(--correct-color);
        border-color: var(--correct-color);
      }
      .choice-btn.wrong {
        background: rgba(255, 71, 87, 0.2);
        color: var(--wrong-color);
        border-color: var(--wrong-color);
      }

      /* --- Result/Answer Section (Overlay) --- */
      #result-overlay {
        display: none;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #111;
        z-index: 10;
        flex-direction: column;
        overflow-y: auto;
      }

      .video-container {
        width: 100%;
        aspect-ratio: 16/9;
        background: black;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      }

      .song-info {
        padding: 30px;
        text-align: center;
        color: white;
        flex-grow: 1;
      }

      .type-badge {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 4px;
        font-size: 12px;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 10px;
      }
      .type-badge.original {
        background: #2ed573;
        color: #000;
      }
      .type-badge.cover {
        background: #ffa502;
        color: #000;
      }

      .song-title {
        font-size: 24px;
        font-weight: 600;
        margin-bottom: 10px;
        color: white;
      }

      /* Artist Info Styling */
      .artist-block {
        margin-bottom: 25px;
        line-height: 1.6;
      }
      .main-artist {
        font-size: 18px;
        color: #ddd;
      }
      .sub-artist {
        font-size: 14px;
        color: #888;
        margin-top: 5px;
      }

      .youtube-link-btn {
        display: inline-flex;
        align-items: center;
        gap: 12px;
        text-decoration: none;
        background: #ff0000;
        color: white;
        padding: 12px 25px;
        border-radius: 50px;
        font-weight: 500;
        font-size: 15px;
        margin-bottom: 25px;
        transition: transform 0.2s;
        box-shadow: 0 5px 20px rgba(255, 0, 0, 0.4);
      }
      .youtube-link-btn:hover {
        transform: scale(1.05);
      }

      .next-btn,
      .restart-btn {
        background: transparent;
        color: white;
        border: 2px solid white;
        padding: 12px 40px;
        border-radius: 12px;
        font-size: 18px;
        cursor: pointer;
        width: auto;
        min-width: 200px;
        transition: all 0.3s;
        font-family: 'Kanit', sans-serif;
      }
      .next-btn:hover,
      .restart-btn:hover {
        background: white;
        color: black;
        box-shadow: 0 0 20px rgba(255, 255, 255, 0.4);
      }

      /* --- Summary Screen --- */
      #summary-screen {
        display: none;
        /* ‡πÅ‡∏Å‡πâ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å absolute ‡πÄ‡∏õ‡πá‡∏ô relative ‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏¥‡∏î absolute ‡πÑ‡∏õ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• */
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #0f0f0f;
        z-index: 20;
        flex-direction: column;
        padding: 40px;
        box-sizing: border-box;
        overflow-y: auto;
        text-align: center;
      }
      .summary-card {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 20px;
        text-align: left;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }
      .summary-card.correct {
        border-left: 5px solid var(--correct-color);
      }
      .summary-card.wrong {
        border-left: 5px solid var(--wrong-color);
      }

      .sum-title {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 5px;
      }
      .sum-detail {
        font-size: 14px;
        color: #aaa;
      }
      .sum-status {
        float: right;
        font-weight: bold;
      }
      .status-correct {
        color: var(--correct-color);
      }
      .status-wrong {
        color: var(--wrong-color);
      }

      .user-choice-wrong {
        color: #ff6b81;
        font-size: 13px;
        margin-top: 5px;
      }
      .sum-link {
        color: #3498db;
        text-decoration: none;
        font-size: 14px;
        margin-top: 5px;
        display: inline-block;
      }

      @keyframes popIn {
        from {
          transform: scale(0.9);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }
    </style>
  </head>
  <body>
    <div id="sound-check-modal">
      <div class="modal-content">
        <div style="font-size: 40px; margin-bottom: 10px">üîä</div>
        <h2 style="margin: 0 0 10px 0">Sound Check</h2>
        <p style="color: #aaa; font-size: 14px; margin-bottom: 20px">
          ‡πÄ‡∏Å‡∏°‡∏ô‡∏µ‡πâ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡∏ü‡∏±‡∏á
          <br />
          ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏•‡∏≥‡πÇ‡∏û‡∏á
        </p>

        <input
          type="text"
          id="player-name"
          class="input-name"
          placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (‡πÄ‡∏ä‡πà‡∏ô ‡∏ô‡πâ‡∏≠‡∏á‡∏ö‡∏µ‡∏°)"
        />

        <button
          onclick="playTestSound()"
          class="play-btn"
          style="
            margin: 0 auto 15px;
            width: 60px;
            height: 60px;
            font-size: 20px;
            box-shadow: none;
            border: 2px solid rgba(255, 255, 255, 0.1);
          "
        >
          ‚ñ∂
        </button>
        <p id="test-status" style="font-size: 12px; color: #777">
          ‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á
        </p>

        <div class="volume-container">
          <span>üîà</span>
          <input
            type="range"
            class="volume-slider"
            id="modal-volume"
            min="0"
            max="1"
            step="0.1"
            value="0.5"
          />
          <span>üîä</span>
        </div>

        <button
          onclick="startGame()"
          style="
            margin-top: 30px;
            background: #2ed573;
            color: white;
            border: none;
            padding: 15px 0;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            box-shadow: 0 5px 15px rgba(46, 213, 115, 0.3);
          "
        >
          ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß! ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°
        </button>
      </div>
    </div>

    <div class="game-wrapper">
      <div class="header-score">
        <span style="font-weight: 300; letter-spacing: 1px">üéµ Music Quiz</span>
        <span class="score-badge" id="score-display">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: 0 / 0</span>
      </div>

      <div id="game-screen" class="game-content">
        <div class="player-area">
          <div class="vinyl-record" id="vinyl"></div>
          <h3 id="question-text">‡∏ü‡∏±‡∏á‡πÄ‡∏û‡∏•‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠!</h3>
          <p
            style="font-size: 13px; color: var(--secondary-text); margin-top: 0"
          >
            ( ‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà
            <span id="current-q-num">1</span>
            )
          </p>

          <div class="progress-container">
            <span id="curr-time">0:00</span>
            <input type="range" id="seek-bar" value="0" step="0.1" />
            <span id="dur-time">0:00</span>
          </div>

          <div class="controls">
            <button class="play-btn" id="main-play-btn" onclick="togglePlay()">
              ‚ñ∂
            </button>
          </div>

          <div class="volume-container">
            <span>üîâ</span>
            <input
              type="range"
              class="volume-slider"
              id="game-volume"
              min="0"
              max="1"
              step="0.1"
              value="0.5"
            />
            <span>üîä</span>
          </div>
        </div>

        <div class="choices-area" id="choices-container"></div>
      </div>

      <div id="result-overlay">
        <div class="video-container">
          <iframe
            id="yt-player"
            width="100%"
            height="100%"
            src=""
            title="YouTube video player"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen
          ></iframe>
        </div>

        <div class="song-info">
          <div
            id="result-message"
            style="margin-bottom: 10px; font-weight: bold; font-size: 24px"
          ></div>
          <div id="song-details-area"></div>

          <a href="#" target="_blank" id="res-link" class="youtube-link-btn">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
              <path
                d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"
              />
            </svg>
            ‡∏ü‡∏±‡∏á‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏ï‡πá‡∏°‡∏ö‡∏ô YouTube
          </a>

          <br />
          <button class="next-btn" onclick="nextQuestion()">‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡πÑ‡∏õ ‚ûú</button>
        </div>
      </div>

      <div id="summary-screen">
        <h1 style="color: var(--primary-color)">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h1>
        <div
          id="summary-header"
          style="font-size: 18px; margin-bottom: 20px; line-height: 1.6"
        ></div>
        <div
          id="summary-compliment"
          style="
            font-size: 22px;
            font-weight: bold;
            color: #fff;
            margin-bottom: 30px;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
          "
        ></div>

        <div id="summary-list" style="margin-bottom: 30px"></div>

        <div
          style="
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
          "
        >
          <button
            onclick="downloadSummary('png')"
            style="
              background: #e1b12c;
              color: #000;
              border: none;
              padding: 10px 20px;
              border-radius: 8px;
              cursor: pointer;
              font-weight: bold;
            "
          >
            üì∏ ‡πÄ‡∏ã‡∏ü‡∏£‡∏π‡∏õ (PNG)
          </button>
          <button
            onclick="downloadSummary('pdf')"
            style="
              background: #e74c3c;
              color: #fff;
              border: none;
              padding: 10px 20px;
              border-radius: 8px;
              cursor: pointer;
              font-weight: bold;
            "
          >
            üìÑ ‡πÄ‡∏ã‡∏ü‡πÑ‡∏ü‡∏•‡πå (PDF)
          </button>
        </div>

        <button class="restart-btn" onclick="location.reload()">
          üîÑ ‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
        </button>
      </div>
    </div>

    <audio id="main-audio"></audio>
    <audio id="test-audio" src="test.mp3"></audio>

    <script>
      // --- 1. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏•‡∏á ---
      const songList = [
        {
          id: 1,
          type: 'original',
          artist: '‡∏à‡∏µ‡πÄ‡∏´‡∏•‡∏¥‡∏ô ‡∏™‡∏≤‡∏¢‡∏´‡∏°‡∏≠‡∏ö',
          title: '‡∏ö‡∏±‡∏Å‡∏à‡∏µ‡πÄ‡∏´‡∏•‡∏¥‡∏ô - ‡∏à‡∏µ‡πÄ‡∏´‡∏•‡∏¥‡∏ô ‡∏™‡∏≤‡∏¢‡∏´‡∏°‡∏≠‡∏ö',
          audioFile: 'song1.mp3',
          youtubeId: 'f5GbsArbFgo',
          choices: [
            '‡∏õ.‡∏Ç‡∏µ‡πâ‡πÑ‡∏Å‡πà‡πÇ‡∏õ‡πà - ‡∏ú‡∏∂‡πâ‡∏á‡∏´‡∏ß‡∏≤‡∏ô ‡∏ó‡∏µ‡∏ß‡∏µ‡∏°‡∏¥‡∏ß‡∏™‡∏¥‡∏Ñ',
            '‡∏ö‡∏±‡∏Å‡πÅ‡∏ï‡∏á‡πÇ‡∏° - ‡∏ß‡∏á‡∏Æ‡∏±‡∏ô‡πÅ‡∏ô‡∏ß',
            '‡πÄ‡∏ô‡∏≤‡∏∞(‡ªÄ‡∫ô‡∫≤‡∫∞) - ‡∏ö‡∏≠‡∏° ‡∏•‡∏π‡∏Å‡∏û‡∏£‡∏∞‡∏ò‡∏≤‡∏ï‡∏∏',
            '‡∏ö‡∏±‡∏Å‡∏à‡∏µ‡πÄ‡∏´‡∏•‡∏¥‡∏ô - ‡∏à‡∏µ‡πÄ‡∏´‡∏•‡∏¥‡∏ô ‡∏™‡∏≤‡∏¢‡∏´‡∏°‡∏≠‡∏ö',
          ],
          correctIndex: 3,
        },
        {
          id: 2,
          type: 'cover',
          coverArtist: '‡∏≠‡∏≠‡∏£‡πå‡πÅ‡∏Å‡∏ô',
          originalArtist: 'MAIYARAP & MILLI',
          title: '‡πÅ‡∏ü‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏∏‡πâ‡∏ô - MAIYARAP ft. MILLI [Cover by ‡∏≠‡∏≠‡∏£‡πå‡πÅ‡∏Å‡∏ô]',
          audioFile: 'song2.mp3',
          youtubeId: 'c0mgCr8MJrM',
          choices: [
            '‡πÅ‡∏ü‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏∏‡πâ‡∏ô - MAIYARAP ft. MILLI',
            '‡∏Ñ‡∏¥‡∏î(‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà)‡∏ñ‡∏∂‡∏á - Tilly Birds',
            '‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏≤‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô‡∏≠‡∏µ‡∏Å - Tilly Birds',
            '‡∏•‡∏∑‡∏°‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏ß‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏¢‡∏±‡∏á‡πÑ‡∏á - Jeff Satur',
          ],
          correctIndex: 0,
        },
        {
          id: 3,
          type: 'cover',
          coverArtist: '‡∏õ‡πä‡∏≠‡∏ö ‡∏õ‡∏≠‡∏á‡∏Å‡∏π‡∏• ‡πÄ‡πÄ‡∏•‡∏∞ paiiinntt',
          originalArtist: 'Calories Blah Blah',
          title:
            '‡πÅ‡∏û‡πâ‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤‡∏£‡∏±‡∏Å - paiiinntt x ‡∏õ‡πä‡∏≠‡∏ö ‡∏õ‡∏≠‡∏á‡∏Å‡∏π‡∏• (POP PONGKOOL) |„ÄåOriginals and paiiinntt„Äç',
          audioFile: 'song3.mp3',
          youtubeId: 'PYlmVZlsoLI',
          choices: [
            '‡πÅ‡∏û‡πâ‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤‡∏£‡∏±‡∏Å - paiiinntt x ‡∏õ‡πä‡∏≠‡∏ö ‡∏õ‡∏≠‡∏á‡∏Å‡∏π‡∏•',
            '‡πÄ‡∏û‡∏•‡∏á‡∏£‡∏±‡∏Å - Three Man Down',
            '‡∏£‡∏±‡∏Å‡πÅ‡∏£‡∏Å‡∏û‡∏ö - Tattoo Colour',
            '‡πÄ‡∏û‡∏•‡∏á‡∏£‡∏±‡∏Å‡πÄ‡∏û‡∏•‡∏á‡πÅ‡∏£‡∏Å - LANDOKMAI (Blooming)',
          ],
          correctIndex: 0,
        },
        {
          id: 4,
          type: 'original',
          artist: 'ASIA7',
          title: 'Loop (‡∏â‡∏±‡∏ô‡∏à‡∏∂‡∏á‡∏ß‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤) - ASIA7',
          audioFile: 'song4.mp3',
          youtubeId: 'gEsCDJGqrlc',
          choices: [
            'Loop (‡∏â‡∏±‡∏ô‡∏à‡∏∂‡∏á‡∏ß‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤) - ASIA7',
            '‡∏™‡∏ô‡∏¥‡∏ó‡πÉ‡∏à - PALMY (‡πÄ‡∏û‡∏•‡∏á‡∏à‡∏≤‡∏Å‡∏•‡∏∞‡∏Ñ‡∏£‡∏£‡∏±‡∏Å‡∏£‡πâ‡∏≤‡∏¢)',
            '‡∏ó‡∏µ‡∏•‡∏∞‡∏ô‡πâ‡∏≠‡∏¢ - Hers (little by little)',
            '‡∏ã‡πà‡∏≠‡∏ô‡∏Å‡∏•‡∏¥‡πà‡∏ô - PALMY',
          ],
          correctIndex: 0,
        },
        {
          id: 5,
          type: 'cover',
          coverArtist: '‡∏ô‡∏ô‡∏ô‡∏∞',
          originalArtist: '‡∏ï‡∏µ‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏π‡πÄ‡∏°‡∏∑‡∏≠‡∏á - ILLSLICK',
          title:
            '‡∏ô‡∏ô‡∏ô‡∏∞ - ‡∏ï‡∏µ‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏•‡∏±‡∏á‡πÇ‡∏ö‡∏™‡∏ñ‡πå [ Original ‡∏ï‡∏µ‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏π‡πÄ‡∏°‡∏∑‡∏≠‡∏á ILLSLICK ]',
          audioFile: 'song5.mp3',
          youtubeId: 'B4fDaq2cRTU',
          choices: [
            '‡∏ï‡∏µ‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏•‡∏±‡∏á‡πÇ‡∏ö‡∏™‡∏ñ‡πå - ‡∏ô‡∏ô‡∏ô‡∏∞',
            '‡∏ï‡∏µ‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏π‡πÄ‡∏°‡∏∑‡∏≠‡∏á - ILLSLICK',
            '‡∏Ñ‡∏ô‡∏™‡∏ß‡∏¢ - (feat. N0RMA1 & BARON)',
            '‡∏•‡∏∑‡∏°‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏ß‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏¢‡∏±‡∏á‡πÑ‡∏á - Jeff Satur',
          ],
          correctIndex: 0,
        },
        {
          id: 6,
          type: 'cover',
          coverArtist: '‡∏î‡∏µ‡πÄ‡∏à‡∏Å‡∏¥‡∏ï ‡∏£‡∏µ‡∏°‡∏¥‡∏Å‡∏ã‡πå',
          originalArtist: 'Moxy',
          title:
            'Ben10 ‡∏Ç‡πà‡∏≠‡∏¢‡∏™‡∏¥‡πÅ‡∏õ‡∏•‡∏á‡∏£‡πà‡∏≤‡∏á Ver. ‡πÅ‡∏î‡∏ô‡∏ã‡πå‡∏™‡∏≤‡∏¢‡∏¢‡πà‡∏≠ Remix BY [ ‡∏î‡∏µ‡πÄ‡∏à‡∏Å‡∏¥‡∏ï ‡∏£‡∏µ‡∏°‡∏¥‡∏Å‡∏ã‡πå ]',
          audioFile: 'song6.mp3',
          youtubeId: 'MtnzEwpuC0E',
          choices: [
            'Ben10 - Cartoon Network Thai',
            'Ben10 - Moxy',
            'Saint Seiya - Legend Of Sanctuary',
            'Ben10 - ‡∏î‡∏µ‡πÄ‡∏à‡∏Å‡∏¥‡∏ï ‡∏£‡∏µ‡∏°‡∏¥‡∏Å‡∏ã‡πå',
          ],
          correctIndex: 3,
        },
        {
          id: 7,
          type: 'cover',
          coverArtist: '‡πÄ‡∏≠‡πá‡∏° ‡∏ï‡∏≥‡∏ô‡∏≤‡∏ô',
          originalArtist: '‡πÉ‡∏à‡∏™‡∏±‡πà‡∏á‡∏°‡∏≤ - LOSO',
          title: '‡πÉ‡∏à‡∏™‡∏±‡πà‡∏á‡∏°‡∏≤ cover by ‡πÄ‡∏≠‡πá‡∏° ‡∏ï‡∏≥‡∏ô‡∏≤‡∏ô',
          audioFile: 'song7.mp3',
          youtubeId: 'i8_EvENJKck',
          choices: [
            '‡πÉ‡∏à‡∏™‡∏±‡πà‡∏á‡∏°‡∏≤ - cover by ‡πÄ‡∏≠‡πá‡∏° ‡∏ï‡∏≥‡∏ô‡∏≤‡∏ô',
            '‡πÉ‡∏à‡∏™‡∏±‡πà‡∏á‡∏°‡∏≤ - LOSO',
            '‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏à‡∏±‡∏ö ‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡πÉ‡∏à - ‡∏ô‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö',
            '‡∏°‡∏≤‡∏™‡∏±‡πà‡∏á‡πÉ‡∏à(‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏°‡∏≤) - ‡∏ß‡∏á‡∏ü‡∏¥‡∏ß‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÅ‡∏ö‡∏ô‡∏î‡πå',
          ],
          correctIndex: 0,
        },
        {
          id: 8,
          type: 'original',
          artist: 'NOAH',
          title: 'NOAH - ‡∏´‡∏¢‡∏∏‡∏î‡∏£‡∏±‡∏Å‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß FT. Archy',
          audioFile: 'song8.mp3',
          youtubeId: 'NO4bM4WW1GQ',
          choices: [
            '‡∏´‡∏¢‡∏∏‡∏î‡∏£‡∏±‡∏Å‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß - NOAH',
            '‡∏•‡∏≠‡∏á‡∏£‡∏±‡∏Å‡∏î‡∏π‡πÑ‡∏´‡∏° - NOAH',
            '‡∏ä‡∏≠‡∏ö‡πÄ‡∏ò‡∏≠‡∏≠‡∏∞ - PtrpStudio',
            '‡∏ï‡∏Å‡∏´‡∏•‡∏∏‡∏°‡∏£‡∏±‡∏Å - Waii',
          ],
          correctIndex: 0,
        },
        {
          id: 9,
          type: 'original',
          artist: 'Tobadolls',
          title: '‡∏°‡∏∞‡∏á‡∏∂‡∏Å‡πÜ‡∏≠‡∏∏‡πã‡∏á‡πÜ - ORNLY YOU',
          audioFile: 'song9.mp3',
          youtubeId: 'HI4voGt6LLM',
          choices: [
            '‡∏°‡∏∞‡∏á‡∏∂‡∏Å‡πÜ‡∏≠‡∏∏‡πã‡∏á‡πÜ - ORNLY YOU',
            '‡∏≠‡∏∏‡πã‡∏á‡πÜ - PORZAX',
            '‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏î‡∏µ - ‡∏≠‡πâ‡∏≠‡∏ô‡πÅ‡∏≠‡πâ‡∏ô',
            '‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏ò‡∏≠‡∏¢‡∏¥‡πâ‡∏° - POLYCAT (‡∏≠‡πâ‡∏≠‡∏ô‡πÅ‡∏≠‡πâ‡∏ô)',
          ],
          correctIndex: 0,
        },{
          id: 10,
          type: 'cover',
          coverArtist: '‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏ï‡πâ‡∏á‡∏ö‡∏≠‡∏°‡∏ö‡∏µ‡πâ‡∏°‡∏¥‡∏ß‡∏™‡∏¥‡∏Ñ',
          originalArtist: 'The TOYS - ‡∏•‡∏≤‡∏•‡∏≤‡∏•‡∏≠‡∏¢ (100%)',
          title: '‡∏•‡∏≤‡∏•‡∏≤‡∏•‡∏≠‡∏¢ (100%) ver. ‡∏°‡∏≤‡∏°‡∏≤‡∏´‡∏•‡∏≠‡∏¢ - ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏ï‡πâ‡∏á‡∏ö‡∏≠‡∏°‡∏ö‡∏µ‡πâ‡∏°‡∏¥‡∏ß‡∏™‡∏¥‡∏Ñ',
          audioFile: 'song10.mp3',
          youtubeId: 'Ik9BFphICuc',
          choices: [
            '‡∏•‡∏≤‡∏•‡∏≤‡∏•‡∏≠‡∏¢ (100%) - ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏ï‡πâ‡∏á‡∏ö‡∏≠‡∏°‡∏ö‡∏µ‡πâ‡∏°‡∏¥‡∏ß‡∏™‡∏¥‡∏Ñ',
            '‡∏•‡∏≤‡∏•‡∏≤‡∏•‡∏≠‡∏¢ (100%) - The TOYS',
            '‡πÑ‡∏™‡∏ß‡πà‡∏≤‡∏™‡∏¥‡∏ö‡πà‡∏ñ‡∏¥‡πà‡∏°‡∏Å‡∏±‡∏ô - ‡∏Å‡πâ‡∏≠‡∏á ‡∏´‡πâ‡∏ß‡∏¢‡πÑ‡∏£‡πà',
            'The Spectre - Alan Walker',
          ],
          correctIndex: 0,
        },{
          id: 11,
          type: 'cover',
          coverArtist: '‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏ï‡πâ‡∏á‡∏ö‡∏≠‡∏°‡∏ö‡∏µ‡πâ‡∏°‡∏¥‡∏ß‡∏™‡∏¥‡∏Ñ', // ‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏Ñ‡∏•‡∏¥‡∏õ/‡∏£‡πâ‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà
          originalArtist: 'The Weeknd', // ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏ó‡∏≥‡∏ô‡∏≠‡∏á/‡πÄ‡∏û‡∏•‡∏á‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö‡∏à‡∏£‡∏¥‡∏á‡πÜ
          title: 'Die For You (‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô ‡∏û‡∏µ‡πà‡πÑ‡∏°‡∏Ñ‡πå ‡∏†‡∏¥‡∏£‡∏°‡∏¢‡πå‡∏û‡∏£) - ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏ï‡πâ‡∏á‡∏ö‡∏≠‡∏°‡∏ö‡∏µ‡πâ‡∏°‡∏¥‡∏ß‡∏™‡∏¥‡∏Ñ',
          audioFile: 'song11.mp3',
          youtubeId: 'I_ISCwu_k_E',
          choices: [
            'Die For You (‡∏û‡∏µ‡πà‡πÑ‡∏°‡∏Ñ‡πå ‡∏†‡∏¥‡∏£‡∏°‡∏¢‡πå‡∏û‡∏£) - ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏ï‡πâ‡∏á‡∏ö‡∏≠‡∏°‡∏ö‡∏µ‡πâ‡∏°‡∏¥‡∏ß‡∏™‡∏¥‡∏Ñ',
            '‡∏ö‡∏∏‡∏ç‡∏ú‡∏•‡∏≤ - ‡πÑ‡∏°‡∏Ñ‡πå ‡∏†‡∏¥‡∏£‡∏°‡∏¢‡πå‡∏û‡∏£', 
            'Die For You - The Weeknd',
            '‡∏Å‡∏•‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏≤‡∏´‡∏•‡πà‡∏≤ - ‡πÑ‡∏°‡∏Ñ‡πå ‡∏†‡∏¥‡∏£‡∏°‡∏¢‡πå‡∏û‡∏£',
          ],
          correctIndex: 0,
        },{
          id: 12,
          type: 'original',
          artist: '‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£‡∏ò‡∏£‡∏£‡∏°‡∏™‡∏ñ‡∏≤‡∏ô',
          title: '‡∏î‡∏±‡πà‡∏á‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ‡∏ö‡∏≤‡∏ô.',
          audioFile: 'song12.mp3',
          youtubeId: 'dhFt7eURm78',
          choices: [
            '‡∏î‡∏±‡πà‡∏á‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ‡∏ö‡∏≤‡∏ô. - ‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£‡∏ò‡∏£‡∏£‡∏°‡∏™‡∏ñ‡∏≤‡∏ô',
            '‡∏™‡∏á‡∏Å‡∏£‡∏≤‡∏ô‡∏ï‡πå - ‡πÉ‡∏à‡∏ô‡∏±‡∏Å‡πÄ‡∏•‡∏á',
            '‡∏û‡∏£‡∏∞‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå‡∏¢‡∏¥‡πâ‡∏°‡πÅ‡∏â‡πà‡∏á',
            '‡∏§‡∏î‡∏π‡∏£‡πâ‡∏≠‡∏ô - PARADOX',
          ],
          correctIndex: 0,
        },{
          id: 13,
          type: 'original',
          artist: '‡∏û‡∏µ ‡∏™‡∏∞‡πÄ‡∏î‡∏¥‡∏î',
          title: '‡∏à‡∏µ‡πà‡∏´‡∏≠‡∏¢ - ‡∏û‡∏µ ‡∏™‡∏∞‡πÄ‡∏î‡∏¥‡∏î',
          audioFile: 'song13.mp3',
          youtubeId: 'Jd4Hd-HFgls',
          choices: [
            '‡∏à‡∏µ‡πà‡∏´‡∏≠‡∏¢ - ‡∏û‡∏µ ‡∏™‡∏∞‡πÄ‡∏î‡∏¥‡∏î',
            'Bruno Mars - The Lazy Song',
            'PSY - GANGNAM STYLE',
            'Michael Jackson - Smooth Criminal',
          ],
          correctIndex: 0,
        },{
          id: 14,
          type: 'cover',
          coverArtist: 'Mr.Gamememe',
          originalArtist: 'ZENTYARB(ZENTYARB - ‡∏â‡∏ö‡∏±‡∏ö‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ Feat.SARAN)',
          title: 'SpongeBob-‡∏â‡∏ö‡∏±‡∏ö‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ feat.Schnitzel (ai cover)',
          audioFile: 'song14.mp3',
          youtubeId: 'zoEnaMcbqIQ',
          choices: [
            '‡∏â‡∏ö‡∏±‡∏ö‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ - SpongeBob',
            '‡∏â‡∏ö‡∏±‡∏ö‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ - ZENTYARB',
            '‡∏£‡∏ñ‡πÑ‡∏ü‡∏ö‡∏ô‡∏ü‡πâ‡∏≤ - D GERRARD',
            '‡∏â‡∏ö‡∏±‡∏ö‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á - ZENTYARB x PUNYARB',
          ],
          correctIndex: 0,
        },{
          id: 15,
          type: 'cover',
          coverArtist: 'GaoGame',
          originalArtist: 'ZENTYARB(ZENTYARB - ‡∏â‡∏ö‡∏±‡∏ö‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ Feat.SARAN)',
          title: '‡∏ö‡∏ó‡∏™‡∏ß‡∏î‡∏≠‡∏¥‡∏ï‡∏¥‡∏õ‡∏¥‡πÇ‡∏™ - [ver.Michael Jackson]',
          audioFile: 'song15.mp3',
          youtubeId: '-DvmeDKrJa8',
          choices: [
            '‡∏ö‡∏ó‡∏™‡∏ß‡∏î‡∏≠‡∏¥‡∏ï‡∏¥‡∏õ‡∏¥‡πÇ‡∏™ - ver.Michael Jackson',
            'Billie Jean - Michael Jackson',
            'Beat It - Michael Jackson',
            '‡∏Ñ‡∏≤‡∏ñ‡∏≤‡∏ä‡∏¥‡∏ô‡∏ö‡∏±‡∏ç‡∏ä‡∏£ - ver.Eminem',
          ],
          correctIndex: 0,
        },
      ];

      // --- Variables ---
      let currentQuestionIndex = 0;
      let score = 0;
      let isPlaying = false;
      let playerName = '';
      let userAnswers = [];

      // --- Elements ---
      const mainAudio = document.getElementById('main-audio');
      const testAudio = document.getElementById('test-audio');
      const playBtn = document.getElementById('main-play-btn');
      const vinyl = document.getElementById('vinyl');
      const seekBar = document.getElementById('seek-bar');
      const currTimeText = document.getElementById('curr-time');
      const durTimeText = document.getElementById('dur-time');
      const choicesContainer = document.getElementById('choices-container');
      const resultOverlay = document.getElementById('result-overlay');
      const ytPlayer = document.getElementById('yt-player');
      const songDetailsArea = document.getElementById('song-details-area');
      const scoreDisplay = document.getElementById('score-display');
      const summaryScreen = document.getElementById('summary-screen');

      // --- Sound Check Functions ---
      const modalVolume = document.getElementById('modal-volume');
      const gameVolume = document.getElementById('game-volume');

      function setVolume(val) {
        mainAudio.volume = val;
        testAudio.volume = val;
        modalVolume.value = val;
        gameVolume.value = val;
      }

      modalVolume.addEventListener('input', (e) => setVolume(e.target.value));
      gameVolume.addEventListener('input', (e) => setVolume(e.target.value));

      function playTestSound() {
        if (testAudio.paused) {
          testAudio.play();
          document.getElementById('test-status').innerText = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡πà‡∏ô...';
          document.getElementById('test-status').style.color = '#2ed573';
        } else {
          testAudio.pause();
          testAudio.currentTime = 0;
          document.getElementById('test-status').innerText =
            '‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á';
          document.getElementById('test-status').style.color = '#777';
        }
      }

      // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏•‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏≠‡∏≤‡πÄ‡∏£‡∏¢‡πå (Shuffle)
      function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
      }

      function startGame() {
        const nameInput = document.getElementById('player-name').value.trim();
        if (!nameInput) {
          alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡∏Ñ‡∏£‡∏±‡∏ö');
          return;
        }
        playerName = nameInput;

        // ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö
        testAudio.pause();
        document.getElementById('sound-check-modal').style.display = 'none';

        // ‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏•‡∏á‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°
        shuffleArray(songList);

        updateScoreDisplay();
        loadQuestion(currentQuestionIndex);
      }

      function updateScoreDisplay() {
        scoreDisplay.innerText = `‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ${score} / ${songList.length}`;
      }

      // --- Game Logic ---
      function loadQuestion(index) {
        if (index >= songList.length) {
          showSummary();
          return;
        }

        const song = songList[index];
        currentQuestionIndex = index;

        // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏Ñ: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å question-number ‡πÄ‡∏õ‡πá‡∏ô current-q-num ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö HTML
        const qNumElement = document.getElementById('current-q-num');
        if (qNumElement) {
          qNumElement.innerText = index + 1;
        }

        // Setup ‡πÄ‡∏û‡∏•‡∏á (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ song.audioFile ‡∏ï‡∏≤‡∏°‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì)
        mainAudio.src = song.audioFile;
        mainAudio.load();

        resetPlayerUI();

        // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏â‡∏•‡∏¢
        ytPlayer.src = '';
        resultOverlay.style.display = 'none';

        const choicesContainer = document.getElementById('choices-container');
        choicesContainer.innerHTML = '';

        // --- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏•‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ä‡πâ‡∏≠‡∏¢‡∏™‡πå ---
        let choiceOptions = [...song.choices];
        shuffleArray(choiceOptions);

        choiceOptions.forEach((choiceText) => {
          const btn = document.createElement('button');
          btn.className = 'choice-btn';
          btn.innerText = choiceText;

          // ‡∏™‡πà‡∏á "‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ö‡∏ô‡∏õ‡∏∏‡πà‡∏°" ‡πÑ‡∏õ‡πÄ‡∏ä‡πá‡∏Ñ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÄ‡∏•‡∏Ç
          btn.onclick = () => checkAnswer(choiceText, btn);

          choicesContainer.appendChild(btn);
        });
      }

      function checkAnswer(selectedText, btnElement) {
        const data = songList[currentQuestionIndex];

        pauseAudio();

        const allBtns = document.querySelectorAll('.choice-btn');
        allBtns.forEach((b) => (b.disabled = true));

        // ‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á‡πÜ ‡∏à‡∏≤‡∏Å index ‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö
        const correctText = data.choices[data.correctIndex];
        const isCorrect = selectedText === correctText;

        // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö
        userAnswers.push({
          questionId: data.id,
          songTitle: data.title,
          isCorrect: isCorrect,
          selectedChoice: selectedText,
          correctChoice: correctText,
          youtubeId: data.youtubeId,
        });

        if (isCorrect) {
          btnElement.classList.add('correct');
          score++;
          updateScoreDisplay();

          document.getElementById('result-message').innerText =
            '‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏°‡∏≤‡∏Å! ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡∏ö ‚úÖ';
          document.getElementById('result-message').style.color = '#2ed573';
        } else {
          btnElement.classList.add('wrong');
          // ‡πÑ‡∏Æ‡πÑ‡∏•‡∏ó‡πå‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å ‡πÇ‡∏î‡∏¢‡∏´‡∏≤‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÄ‡∏â‡∏•‡∏¢
          allBtns.forEach((b) => {
            if (b.innerText === correctText) b.classList.add('correct');
          });

          document.getElementById('result-message').innerText = '‡∏ú‡∏¥‡∏î‡∏Ñ‡∏£‡∏±‡∏ö! ‚ùå';
          document.getElementById('result-message').style.color = '#ff4757';
        }

        setTimeout(() => {
          showResultOverlay(data);
        }, 1500);
      }

      function showResultOverlay(data) {
        resultOverlay.style.display = 'flex';

        let badgeHtml = '';
        let infoHtml = '';

        if (data.type === 'cover') {
          badgeHtml = `<span class="type-badge cover">Cover Version</span>`;
          infoHtml = `
                <div class="song-title">${data.title}</div>
                <div class="artist-block">
                    <div class="main-artist">üéôÔ∏è Cover by: <b>${data.coverArtist}</b></div>
                    <div class="sub-artist">Original by: ${data.originalArtist}</div>
                </div>
            `;
        } else {
          badgeHtml = `<span class="type-badge original">Original Version</span>`;
          infoHtml = `
                <div class="song-title">${data.title}</div>
                <div class="artist-block">
                    <div class="main-artist">‡∏®‡∏¥‡∏•‡∏õ‡∏¥‡∏ô: <b>${data.artist}</b></div>
                </div>
            `;
        }

        songDetailsArea.innerHTML = badgeHtml + infoHtml;

        document.getElementById(
          'res-link'
        ).href = `https://www.youtube.com/watch?v=${data.youtubeId}`;
        ytPlayer.src = `https://www.youtube.com/embed/${data.youtubeId}?autoplay=1&rel=0`;
      }

      function nextQuestion() {
        currentQuestionIndex++;
        loadQuestion(currentQuestionIndex);
      }

      function showSummary() {
        // --- 1. ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏û‡∏•‡∏á‡πÅ‡∏•‡∏∞‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï ---
        pauseAudio();
        mainAudio.currentTime = 0;
        ytPlayer.src = '';

        // --- 2. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• ---
        summaryScreen.style.position = 'relative';
        summaryScreen.style.height = 'auto';

        document.querySelector('.game-wrapper').style.maxWidth = '600px';
        document.getElementById('game-screen').style.display = 'none';
        document.getElementById('result-overlay').style.display = 'none';
        document.querySelector('.header-score').style.display = 'none';

        summaryScreen.style.display = 'flex';

        // --- 3. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ---
        const total = songList.length;
        const percent = (score / total) * 100;

        let compliment = '';
        if (percent === 100) compliment = 'üéâ ‡∏™‡∏∏‡∏î‡∏¢‡∏≠‡∏î! ‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏ó‡∏û‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏π‡∏ó‡∏¥‡∏û‡∏¢‡πå!';
        else if (percent >= 80)
          compliment = '‚ú® ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏°‡∏≤‡∏Å! ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ü‡∏ô‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡πÅ‡∏ó‡πâ‡∏ï‡∏±‡∏ß‡∏¢‡∏á‡πÄ‡∏•‡∏¢';
        else if (percent >= 50)
          compliment = 'üëç ‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏î‡∏µ! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥‡πÅ‡∏°‡πà‡∏ô‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏ô‡∏∞';
        else compliment = '‚úåÔ∏è ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£‡∏ô‡∏∞! ‡∏•‡∏≠‡∏á‡∏ü‡∏±‡∏á‡πÄ‡∏û‡∏•‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏¢‡∏≠‡∏∞‡∏Ç‡∏∂‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏°‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà';

        // --- 4. ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏•‡∏á‡πÑ‡∏õ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ---

        const websiteName = 'https://pp300950.github.io/quiz/music/music.html';

        document.getElementById('summary-header').innerHTML = `
            <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; display:inline-block; margin-bottom:10px;">
                ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô: <b style="color:#f1c40f; font-size:32px; text-shadow: 2px 2px 4px #000;">${playerName}</b>
            </div>
            <br>
            ‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <b style="font-size:24px;">${score}</b> / ${total} ‡∏Ç‡πâ‡∏≠ (${Math.round(
          percent
        )}%)
            
            <div style="margin-top: 15px; font-size: 14px; color: #aaa;">
                üîó ‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå: <span style="color: #3498db;">${websiteName}</span>
            </div>
        `;
        // ---------------------------------------------------

        document.getElementById('summary-compliment').innerText = compliment;

        const listContainer = document.getElementById('summary-list');
        listContainer.innerHTML = '';

        userAnswers.forEach((ans, index) => {
          const card = document.createElement('div');
          card.className = `summary-card ${
            ans.isCorrect ? 'correct' : 'wrong'
          }`;
          const statusIcon = ans.isCorrect ? '‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á' : '‚ùå ‡∏ú‡∏¥‡∏î';
          const statusClass = ans.isCorrect ? 'status-correct' : 'status-wrong';
          let wrongDetail = !ans.isCorrect
            ? `<div class="user-choice-wrong">‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏≠‡∏ö: ${ans.selectedChoice}</div>`
            : '';

          card.innerHTML = `
                <div class="sum-title">
                    ‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà ${index + 1}: ${ans.songTitle}
                    <span class="sum-status ${statusClass}">${statusIcon}</span>
                </div>
                ${wrongDetail}
            `;
          listContainer.appendChild(card);
        });
      }

      // --- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°: ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î ---
      function downloadSummary(type) {
        const screen = document.getElementById('summary-screen');
        const btns = document.querySelectorAll('button'); // ‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß‡∏ï‡∏≠‡∏ô‡πÅ‡∏Ñ‡∏õ

        // ‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏Ñ‡∏õ‡∏†‡∏≤‡∏û
        btns.forEach((b) => (b.style.display = 'none'));

        html2canvas(screen, {
          backgroundColor: '#0f0f0f', // ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏µ‡∏î‡∏≥
          scale: 2, // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏î
        }).then((canvas) => {
          if (type === 'png') {
            const link = document.createElement('a');
            link.download = `Score-${playerName}.png`;
            link.href = canvas.toDataURL();
            link.click();
          } else if (type === 'pdf') {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF('p', 'mm', 'a4');
            const imgData = canvas.toDataURL('image/png');
            const imgProps = doc.getImageProperties(imgData);
            const pdfWidth = doc.internal.pageSize.getWidth();
            const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;

            doc.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
            doc.save(`Score-${playerName}.pdf`);
          }

          // ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°
          btns.forEach((b) => (b.style.display = ''));
          // ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö display ‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏° Class ‡πÄ‡∏î‡∏¥‡∏°
          document.querySelector('.restart-btn').style.display = 'inline-block';
          document.querySelector('.next-btn').style.display = 'inline-block';
          // ‡∏õ‡∏∏‡πà‡∏°‡πÇ‡∏´‡∏•‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á
          const dlBtns = screen.querySelectorAll('button');
          dlBtns.forEach((b) => (b.style.display = ''));
        });
      }

      // --- Player Logic ---
      function togglePlay() {
        if (mainAudio.paused) {
          playAudio();
        } else {
          pauseAudio();
        }
      }

      function playAudio() {
        mainAudio.play();
        isPlaying = true;
        playBtn.innerText = '‚è∏';
        vinyl.classList.add('playing');
      }

      function pauseAudio() {
        mainAudio.pause();
        isPlaying = false;
        playBtn.innerText = '‚ñ∂';
        vinyl.classList.remove('playing');
      }

      function resetPlayerUI() {
        pauseAudio();
        seekBar.value = 0;
        currTimeText.innerText = '0:00';
        durTimeText.innerText = '0:00';
      }

      mainAudio.addEventListener('timeupdate', () => {
        const ct = mainAudio.currentTime;
        const dur = mainAudio.duration;
        if (!isNaN(dur)) {
          seekBar.max = dur;
          seekBar.value = ct;
          currTimeText.innerText = formatTime(ct);
          durTimeText.innerText = formatTime(dur);
        }
      });

      seekBar.addEventListener('input', () => {
        mainAudio.currentTime = seekBar.value;
      });

      function formatTime(seconds) {
        const min = Math.floor(seconds / 60);
        const sec = Math.floor(seconds % 60);
        return `${min}:${sec < 10 ? '0' : ''}${sec}`;
      }

      setVolume(0.5);
    </script>
  </body>
</html>
