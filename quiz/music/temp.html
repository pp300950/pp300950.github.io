<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Quiz Game - Dark Mode</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #ff4757;
            --accent-glow: #ff6b81;
            --bg-color: #000000;
            --glass-bg: rgba(20, 20, 20, 0.65);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-color: #ffffff;
            --secondary-text: #a4b0be;
        }

        body {
            font-family: 'Kanit', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255, 71, 87, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(46, 213, 115, 0.1) 0%, transparent 40%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: var(--text-color);
            overflow-x: hidden;
        }

        /* --- Sound Check Modal --- */
        #sound-check-modal {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999;
            backdrop-filter: blur(5px);
        }
        .modal-content {
            background: #1e1e1e;
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 90%;
            width: 400px;
            border: 1px solid #333;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
            animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* --- Main Game Wrapper --- */
        .game-wrapper {
            width: 90%;
            max-width: 450px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 30px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            overflow: hidden; /* ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡∏ï‡∏±‡∏î‡∏Ç‡∏≠‡∏ö‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÉ‡∏´‡πâ‡πÇ‡∏Ñ‡πâ‡∏á‡∏ï‡∏≤‡∏° */
            display: flex;
            flex-direction: column;
            position: relative;
            margin: 20px;
            transition: max-width 0.3s ease;
        }

        /* Responsive Layout (PC/iPad) */
        @media (min-width: 768px) {
            .game-wrapper {
                max-width: 900px;
            }
            .game-content {
                display: flex;
                flex-direction: row;
                align-items: stretch;
            }
            .player-area {
                flex: 1;
                border-right: 1px solid var(--glass-border);
                padding: 40px !important;
            }
            .choices-area {
                flex: 1;
                background: transparent !important;
                padding: 40px !important;
                display: flex;
                flex-direction: column;
                justify-content: center;
            }
        }

        .header-score {
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255,255,255,0.03);
            border-bottom: 1px solid var(--glass-border);
            position: relative;
            z-index: 2; /* ‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏´‡∏ô‡∏∑‡∏≠ overlay */
        }
        .score-badge {
            background: rgba(255, 71, 87, 0.2);
            color: #ff6b81;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 600;
            border: 1px solid rgba(255, 71, 87, 0.3);
        }

        /* --- Player UI --- */
        .player-area {
            padding: 30px 20px;
            text-align: center;
        }
        .vinyl-record {
            width: 160px;
            height: 160px;
            border-radius: 50%;
            background: radial-gradient(circle, #222 0%, #111 100%);
            margin: 0 auto 25px;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.4);
            border: 4px solid #333;
            display: flex;
            justify-content: center;
            align-items: center;
            animation: spin 6s linear infinite;
            animation-play-state: paused;
        }
        .vinyl-record::after {
            content: '';
            width: 60px;
            height: 60px;
            background: url('https://cdn-icons-png.flaticon.com/512/9308/9308728.png') no-repeat center/cover;
            border-radius: 50%;
            border: 2px solid #000;
        }
        .vinyl-record.playing { 
            animation-play-state: running; 
            box-shadow: 0 0 25px var(--accent-glow);
            border-color: var(--primary-color);
        }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        h3 { font-weight: 400; letter-spacing: 1px; margin-bottom: 5px; }

        .progress-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 25px;
            font-size: 12px;
            color: var(--secondary-text);
        }
        input[type=range] {
            flex-grow: 1;
            height: 4px;
            -webkit-appearance: none;
            background: #444;
            border-radius: 5px;
            cursor: pointer;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 14px;
            height: 14px;
            background: var(--primary-color);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 10px var(--primary-color);
        }

        .controls {
            margin-top: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .play-btn {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: none;
            background: var(--primary-color);
            color: white;
            font-size: 28px;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(255, 71, 87, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s;
        }
        .play-btn:active { transform: scale(0.95); }

        .volume-container {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            color: var(--secondary-text);
        }
        .volume-slider { width: 80px; }

        /* --- Choices --- */
        .choices-area {
            padding: 25px;
            background: rgba(255,255,255,0.02); 
        }
        .choice-btn {
            width: 100%;
            padding: 18px 25px;
            margin-bottom: 15px;
            background: rgba(255,255,255,0.05); 
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            color: #ddd;
            font-family: 'Kanit', sans-serif;
            font-size: 16px;
            cursor: pointer;
            text-align: left;
            transition: all 0.3s ease;
        }
        .choice-btn:hover:not(:disabled) {
            background: rgba(255,255,255,0.1);
            border-color: var(--primary-color);
            color: white;
            box-shadow: 0 0 15px rgba(255, 71, 87, 0.3);
            transform: translateY(-2px);
        }
        .choice-btn.correct { background: rgba(46, 213, 115, 0.2); color: #2ed573; border-color: #2ed573; }
        .choice-btn.wrong { background: rgba(255, 71, 87, 0.2); color: #ff4757; border-color: #ff4757; }

        /* --- Result/Answer Section (Overlay) --- */
        #result-overlay {
            display: none;
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #111; 
            z-index: 10; /* ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ï‡πâ Header Score ‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏•‡∏¢‡∏Å‡πá‡πÑ‡∏î‡πâ */
            flex-direction: column;
            overflow-y: auto;
        }
        
        .video-container {
            width: 100%;
            /* ‡πÉ‡∏ä‡πâ aspect-ratio ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô ‡πÅ‡∏ï‡πà width 100% ‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏¢‡∏∑‡∏î‡πÄ‡∏ï‡πá‡∏° Box */
            aspect-ratio: 16/9;
            background: black;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        
        .song-info {
            padding: 30px;
            text-align: center;
            color: white;
            flex-grow: 1; /* ‡∏î‡∏±‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏ï‡πá‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà */
        }

        .type-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }
        .type-badge.original { background: #2ed573; color: #000; }
        .type-badge.cover { background: #ffa502; color: #000; }

        .song-title { font-size: 24px; font-weight: 600; margin-bottom: 10px; color: white; }
        
        /* Artist Info Styling */
        .artist-block { margin-bottom: 25px; line-height: 1.6; }
        .main-artist { font-size: 18px; color: #ddd; }
        .sub-artist { font-size: 14px; color: #888; margin-top: 5px; }

        .youtube-link-btn {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            background: #ff0000;
            color: white;
            padding: 12px 25px;
            border-radius: 50px;
            font-weight: 500;
            font-size: 15px;
            margin-bottom: 25px;
            transition: transform 0.2s;
            box-shadow: 0 5px 20px rgba(255, 0, 0, 0.4);
        }
        .youtube-link-btn:hover { transform: scale(1.05); }

        .next-btn {
            background: transparent;
            color: white;
            border: 2px solid white;
            padding: 12px 40px;
            border-radius: 12px;
            font-size: 18px;
            cursor: pointer;
            width: auto;
            min-width: 200px;
            transition: all 0.3s;
        }
        .next-btn:hover {
            background: white;
            color: black;
            box-shadow: 0 0 20px rgba(255,255,255,0.4);
        }

        @keyframes popIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

    </style>
</head>
<body>

    <div id="sound-check-modal">
        <div class="modal-content">
            <div style="font-size: 40px; margin-bottom: 10px;">üîä</div>
            <h2 style="margin: 0 0 10px 0;">Sound Check</h2>
            <p style="color: #aaa; font-size: 14px; margin-bottom: 20px;">‡πÄ‡∏Å‡∏°‡∏ô‡∏µ‡πâ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡∏ü‡∏±‡∏á<br>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÅ‡∏•‡∏∞‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏•‡∏≥‡πÇ‡∏û‡∏á</p>
            
            <button onclick="playTestSound()" class="play-btn" style="margin: 0 auto 15px; width: 60px; height: 60px; font-size: 20px; box-shadow: none; border: 2px solid rgba(255,255,255,0.1);">‚ñ∂</button>
            <p id="test-status" style="font-size: 12px; color: #777;">‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á</p>

            <div class="volume-container">
                <span>üîà</span>
                <input type="range" class="volume-slider" id="modal-volume" min="0" max="1" step="0.1" value="0.5">
                <span>üîä</span>
            </div>

            <button onclick="startGame()" style="margin-top: 30px; background: #2ed573; color: white; border: none; padding: 15px 0; border-radius: 12px; font-size: 16px; font-weight: bold; cursor: pointer; width: 100%; box-shadow: 0 5px 15px rgba(46, 213, 115, 0.3);">
                ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß! ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°
            </button>
        </div>
    </div>

    <div class="game-wrapper">
        <div class="header-score">
            <span style="font-weight: 300; letter-spacing: 1px;">üéµ Music Quiz</span>
            <span class="score-badge" id="score-display">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: 0</span>
        </div>

        <div id="game-screen" class="game-content">
            <div class="player-area">
                <div class="vinyl-record" id="vinyl"></div>
                <h3 id="question-text">‡∏ü‡∏±‡∏á‡πÄ‡∏û‡∏•‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠!</h3>
                <p style="font-size: 13px; color: var(--secondary-text); margin-top: 0;">( ‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà <span id="current-q-num">1</span> )</p>

                <div class="progress-container">
                    <span id="curr-time">0:00</span>
                    <input type="range" id="seek-bar" value="0" step="0.1">
                    <span id="dur-time">0:00</span>
                </div>

                <div class="controls">
                    <button class="play-btn" id="main-play-btn" onclick="togglePlay()">‚ñ∂</button>
                </div>

                <div class="volume-container">
                    <span>üîâ</span>
                    <input type="range" class="volume-slider" id="game-volume" min="0" max="1" step="0.1" value="0.5">
                    <span>üîä</span>
                </div>
            </div>

            <div class="choices-area" id="choices-container">
                </div>
        </div>

        <div id="result-overlay">
            <div class="video-container">
                <iframe id="yt-player" width="100%" height="100%" src="" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
            </div>
            
            <div class="song-info">
                <div id="result-message" style="margin-bottom: 15px; font-weight: bold; font-size: 20px; color: #2ed573;"></div>
                
                <div id="song-details-area"></div>
                
                <a href="#" target="_blank" id="res-link" class="youtube-link-btn">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
                    ‡∏ü‡∏±‡∏á‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏ï‡πá‡∏°‡∏ö‡∏ô YouTube
                </a>

                <br>
                <button class="next-btn" onclick="nextQuestion()">‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡πÑ‡∏õ ‚ûú</button>
            </div>
        </div>

    </div>

    <audio id="main-audio"></audio>
    <audio id="test-audio" src="test.mp3"></audio>

<script>
    // --- 1. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏•‡∏á (Updated JSON Structure) ---
    /*
      type: 'original' ‡∏´‡∏£‡∏∑‡∏≠ 'cover'
      ‡∏ñ‡πâ‡∏≤ type: 'original' -> ‡πÉ‡∏™‡πà artist ‡∏ï‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥
      ‡∏ñ‡πâ‡∏≤ type: 'cover'    -> ‡πÉ‡∏™‡πà coverArtist (‡∏Ñ‡∏ô‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô‡∏ô‡∏µ‡πâ) ‡πÅ‡∏•‡∏∞ originalArtist (‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÄ‡∏û‡∏•‡∏á)
    */
    const songList = [
        {
            id: 1,
            type: "original",  // ‡πÄ‡∏û‡∏•‡∏á‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö
            artist: "‡∏à‡∏µ‡πÄ‡∏´‡∏•‡∏¥‡∏ô ‡∏™‡∏≤‡∏¢‡∏´‡∏°‡∏≠‡∏ö",
            title: "‡∏ö‡∏±‡∏Å‡∏à‡∏µ‡πÄ‡∏´‡∏•‡∏¥‡∏ô - ‡∏à‡∏µ‡πÄ‡∏´‡∏•‡∏¥‡∏ô ‡∏™‡∏≤‡∏¢‡∏´‡∏°‡∏≠‡∏ö",
            audioFile: "song1.mp3", 
            youtubeId: "f5GbsArbFgo",
            choices: [
                "‡∏õ.‡∏Ç‡∏µ‡πâ‡πÑ‡∏Å‡πà‡πÇ‡∏õ‡πà - ‡∏ú‡∏∂‡πâ‡∏á‡∏´‡∏ß‡∏≤‡∏ô ‡∏ó‡∏µ‡∏ß‡∏µ‡∏°‡∏¥‡∏ß‡∏™‡∏¥‡∏Ñ",
                "‡∏ö‡∏±‡∏Å‡πÅ‡∏ï‡∏á‡πÇ‡∏° - ‡∏ß‡∏á‡∏Æ‡∏±‡∏ô‡πÅ‡∏ô‡∏ß",
                "‡πÄ‡∏ô‡∏≤‡∏∞(‡ªÄ‡∫ô‡∫≤‡∫∞) - ‡∏ö‡∏≠‡∏° ‡∏•‡∏π‡∏Å‡∏û‡∏£‡∏∞‡∏ò‡∏≤‡∏ï‡∏∏",
                "‡∏ö‡∏±‡∏Å‡∏à‡∏µ‡πÄ‡∏´‡∏•‡∏¥‡∏ô - ‡∏à‡∏µ‡πÄ‡∏´‡∏•‡∏¥‡∏ô ‡∏™‡∏≤‡∏¢‡∏´‡∏°‡∏≠‡∏ö"
            ],
            correctIndex: 3
        },
        {
            id: 2,
            type: "cover", // ‡πÄ‡∏û‡∏•‡∏á‡∏Ñ‡∏±‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå
            coverArtist: "‡∏≠‡∏≠‡∏£‡πå‡πÅ‡∏Å‡∏ô",   // ‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏ô‡∏£‡πâ‡∏≠‡∏á‡πÉ‡∏ô‡∏Ñ‡∏•‡∏¥‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏≤‡∏°‡∏≤
            originalArtist: "MAIYARAP & MILLI",// ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÄ‡∏û‡∏•‡∏á‡∏à‡∏£‡∏¥‡∏á
            title: "‡πÅ‡∏ü‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏∏‡πâ‡∏ô - MAIYARAP ft. MILLI [Cover by ‡∏≠‡∏≠‡∏£‡πå‡πÅ‡∏Å‡∏ô]",
            audioFile: "song2.mp3",
            youtubeId: "c0mgCr8MJrM", 
            choices: [
                "‡πÅ‡∏ü‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏∏‡πâ‡∏ô - MAIYARAP ft. MILLI",
                "‡∏Ñ‡∏¥‡∏î(‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà)‡∏ñ‡∏∂‡∏á - Tilly Birds",
                "‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏≤‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô‡∏≠‡∏µ‡∏Å - Tilly Birds",
                "‡∏•‡∏∑‡∏°‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏ß‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏¢‡∏±‡∏á‡πÑ‡∏á - Jeff Satur"
            ],
            correctIndex: 0
        }
    ];

    // --- Variables ---
    let currentQuestionIndex = 0;
    let score = 0;
    let isPlaying = false;
    
    // --- Elements ---
    const mainAudio = document.getElementById('main-audio');
    const testAudio = document.getElementById('test-audio');
    const playBtn = document.getElementById('main-play-btn');
    const vinyl = document.getElementById('vinyl');
    const seekBar = document.getElementById('seek-bar');
    const currTimeText = document.getElementById('curr-time');
    const durTimeText = document.getElementById('dur-time');
    const choicesContainer = document.getElementById('choices-container');
    const resultOverlay = document.getElementById('result-overlay');
    const ytPlayer = document.getElementById('yt-player');
    const songDetailsArea = document.getElementById('song-details-area');
    
    // --- Sound Check Functions ---
    const modalVolume = document.getElementById('modal-volume');
    const gameVolume = document.getElementById('game-volume');

    function setVolume(val) {
        mainAudio.volume = val;
        testAudio.volume = val;
        modalVolume.value = val;
        gameVolume.value = val;
    }

    modalVolume.addEventListener('input', (e) => setVolume(e.target.value));
    gameVolume.addEventListener('input', (e) => setVolume(e.target.value));

    function playTestSound() {
        if (testAudio.paused) {
            testAudio.play();
            document.getElementById('test-status').innerText = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡πà‡∏ô...";
            document.getElementById('test-status').style.color = "#2ed573";
        } else {
            testAudio.pause();
            testAudio.currentTime = 0;
            document.getElementById('test-status').innerText = "‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á";
            document.getElementById('test-status').style.color = "#777";
        }
    }

    function startGame() {
        testAudio.pause();
        document.getElementById('sound-check-modal').style.display = 'none';
        loadQuestion(currentQuestionIndex);
    }

    // --- Game Logic ---
    function loadQuestion(index) {
        if (index >= songList.length) {
            alert(`‡∏à‡∏ö‡πÄ‡∏Å‡∏°! ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠ ${score}/${songList.length}`);
            location.reload(); 
            return;
        }

        const data = songList[index];
        
        resultOverlay.style.display = 'none';
        ytPlayer.src = ""; 
        mainAudio.src = data.audioFile;
        mainAudio.load();
        
        document.getElementById('current-q-num').innerText = index + 1;
        resetPlayerUI();

        choicesContainer.innerHTML = '';
        data.choices.forEach((choice, i) => {
            const btn = document.createElement('button');
            btn.className = 'choice-btn';
            btn.innerHTML = choice;
            btn.onclick = () => checkAnswer(i, btn);
            choicesContainer.appendChild(btn);
        });
    }

    function checkAnswer(selectedIndex, btnElement) {
        const data = songList[currentQuestionIndex];
        
        pauseAudio();
        
        const allBtns = document.querySelectorAll('.choice-btn');
        allBtns.forEach(b => b.disabled = true);

        if (selectedIndex === data.correctIndex) {
            btnElement.classList.add('correct');
            score++;
            document.getElementById('score-display').innerText = `‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ${score}`;
            document.getElementById('result-message').innerText = "‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!";
            document.getElementById('result-message').style.color = "#2ed573";
        } else {
            btnElement.classList.add('wrong');
            allBtns[data.correctIndex].classList.add('correct');
            document.getElementById('result-message').innerText = "‚ùå ‡∏ú‡∏¥‡∏î‡∏Ñ‡∏£‡∏±‡∏ö!";
            document.getElementById('result-message').style.color = "#ff4757";
        }

        setTimeout(() => {
            showResult(data);
        }, 1200);
    }

    // --- Show Result Logic (Updated for Cover/Original) ---
    function showResult(data) {
        resultOverlay.style.display = 'flex';
        
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á HTML ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏•‡∏á‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó
        let badgeHtml = '';
        let infoHtml = '';

        if (data.type === 'cover') {
            // ‡∏Å‡∏£‡∏ì‡∏µ‡πÄ‡∏õ‡πá‡∏ô Cover
            badgeHtml = `<span class="type-badge cover">Cover Version</span>`;
            infoHtml = `
                <div class="song-title">${data.title}</div>
                <div class="artist-block">
                    <div class="main-artist">üéôÔ∏è Cover by: <b>${data.coverArtist}</b></div>
                    <div class="sub-artist">Original by: ${data.originalArtist}</div>
                </div>
            `;
        } else {
            // ‡∏Å‡∏£‡∏ì‡∏µ‡πÄ‡∏õ‡πá‡∏ô Original
            badgeHtml = `<span class="type-badge original">Original Version</span>`;
            infoHtml = `
                <div class="song-title">${data.title}</div>
                <div class="artist-block">
                    <div class="main-artist">‡∏®‡∏¥‡∏•‡∏õ‡∏¥‡∏ô: <b>${data.artist}</b></div>
                </div>
            `;
        }

        // ‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á‡πÑ‡∏õ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
        songDetailsArea.innerHTML = badgeHtml + infoHtml;

        // ‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡πà‡∏ô‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠
        document.getElementById('res-link').href = `https://www.youtube.com/watch?v=${data.youtubeId}`;
        ytPlayer.src = `https://www.youtube.com/embed/${data.youtubeId}?autoplay=1&rel=0`;
    }

    function nextQuestion() {
        currentQuestionIndex++;
        loadQuestion(currentQuestionIndex);
    }

    // --- Player Logic ---
    function togglePlay() {
        if (mainAudio.paused) {
            playAudio();
        } else {
            pauseAudio();
        }
    }

    function playAudio() {
        mainAudio.play();
        isPlaying = true;
        playBtn.innerText = "‚è∏";
        vinyl.classList.add('playing');
    }

    function pauseAudio() {
        mainAudio.pause();
        isPlaying = false;
        playBtn.innerText = "‚ñ∂";
        vinyl.classList.remove('playing');
    }

    function resetPlayerUI() {
        pauseAudio();
        seekBar.value = 0;
        currTimeText.innerText = "0:00";
        durTimeText.innerText = "0:00";
    }

    mainAudio.addEventListener('timeupdate', () => {
        const ct = mainAudio.currentTime;
        const dur = mainAudio.duration;
        if (!isNaN(dur)) {
            seekBar.max = dur;
            seekBar.value = ct;
            currTimeText.innerText = formatTime(ct);
            durTimeText.innerText = formatTime(dur);
        }
    });

    seekBar.addEventListener('input', () => {
        mainAudio.currentTime = seekBar.value;
    });

    function formatTime(seconds) {
        const min = Math.floor(seconds / 60);
        const sec = Math.floor(seconds % 60);
        return `${min}:${sec < 10 ? '0' : ''}${sec}`;
    }

    setVolume(0.5);

</script>

</body>
</html>